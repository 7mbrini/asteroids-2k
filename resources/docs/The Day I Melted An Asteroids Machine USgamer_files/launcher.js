!function(){var e=void 0;!function t(n,r,o){function i(s,c){if(!r[s]){if(!n[s]){var u="function"==typeof e&&e;if(!c&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[s]={exports:{}};n[s][0].call(d.exports,function(e){var t=n[s][1][e];return i(t?t:e)},d,d.exports,t,n,r,o)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";function r(){var e=s(),t=c(),n=a(e+t.toString()),r=n.substr(0,4),i=n.substr(4);e=e.substr(0,19)+r+"-"+i;var u=o(),l=a(t.origin),d=[h.USERREPORT,u,l].join("."),g=a(e+d+p);return[f,g,e,d].join(".")}function o(){var e=(new Date).getTime()-new Date(2019,0,1).getTime(),t=Math.floor(e/864e5);return t}function i(){return Math.round((new Date).getTime()/1e3)}var a=e("./hash"),s=e("./uuid"),c=e("./location"),u="apr_dsu",l=u+"_ttl",d=31536e3,f="1",p="YicAu6ZpNG",h={USERREPORT:"1"};t.exports={generateDsu:r,getDsuNow:o,getDsuAge:function(){try{var e=window.localStorage.getItem(u),t=e.split("."),n=t[t.length-2];return+n}catch(e){return o()}},readOrCreateDsu:function(e){var t,n;try{t=window.localStorage.getItem(u),n=window.localStorage.getItem(l)}catch(e){return null}if(!t||n&&n<i()){t=r();try{window.localStorage.setItem(u,t),e&&window.localStorage.setItem(l,i()+d),t=window.localStorage.getItem(u)}catch(e){return null}}return t},forceUpdateDsuTtl:function(){try{window.localStorage.getItem(u)&&window.localStorage.setItem(l,i()+d)}catch(e){}}}},{"./hash":2,"./location":3,"./uuid":4}],2:[function(e,t,n){"use strict";var r=e("siphash"),o=[2251905623,1801168887,1769155591,711914637];t.exports=r.hash_hex.bind(null,o)},{siphash:11}],3:[function(e,t,n){"use strict";function r(e){var t=0!==e.indexOf("/")&&e.indexOf("/")!==-1&&(e.indexOf(":")===-1||e.indexOf(":")>e.indexOf("/")),n=i.exec(t?"noscheme://"+e:e),r={scheme:t?"":n[2]||"",host:n[4]||"",hostname:n[4]?n[4].split(":")[0]:"",pathname:n[5]||"",search:n[7]||"",hash:n[9]||"",toString:function(){return e}};return r.origin=r.scheme+"://"+r.host,r}function o(){var e=a||window.location.toString();if(e=e.replace(/\.demo\.audienceproject\.com\//,"/"),s.url===e)return s.parsed;var t=r(e);return s.url=e,s.parsed=t,t}var i=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=null,s={};t.exports=o,t.exports.onLocationChange=function(e){var t=o().pathname,n=setInterval(function(){var n=o().pathname;n!==t&&(t=n,e(n))},100);return function(){clearInterval(n)}},t.exports.updateLocation=function(e){r(e),a=e},t.exports.parse=r},{}],4:[function(e,t,n){"use strict";function r(){var e=new Uint32Array(4);crypto.getRandomValues(e);var t=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){t++;var r=e[t>>3]>>t%8*4&15,o="x"===n?r:3&r|8;return o.toString(16)})}function o(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}var i="function"==typeof Uint32Array&&"undefined"!=typeof crypto&&"undefined"!=typeof crypto.getRandomValues,a=i?r:o;t.exports=a},{}],5:[function(e,t,n){"use strict";var r=e("promise-polyfill");r.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},t.exports=r},{"promise-polyfill":8}],6:[function(e,t,n){"use strict";t.exports=function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);for(var t,n,r=e.length,o=e.slice();r;)t=Math.floor(Math.random()*r--),n=o[r],o[r]=o[t],o[t]=n;return o}},{}],7:[function(e,t,n){(function(e){function t(t){return t&&e.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:e.XMLHttpRequest?new XMLHttpRequest:void 0}function r(e,t,n){e[t]=e[t]||n}var o=["responseType","withCredentials","timeout","onprogress"];n.ajax=function(n,i){function a(e,t){return function(){l||(i(void 0===d.status?e:d.status,0===d.status?"Error":d.response||d.responseText||t,d),l=!0)}}var s=n.headers||{},c=n.body,u=n.method||(c?"POST":"GET"),l=!1,d=t(n.cors);d.open(u,n.url,!0);var f=d.onload=a(200);d.onreadystatechange=function(){4===d.readyState&&f()},d.onerror=a(null,"Error"),d.ontimeout=a(null,"Timeout"),d.onabort=a(null,"Abort"),c&&(r(s,"X-Requested-With","XMLHttpRequest"),e.FormData&&c instanceof e.FormData||r(s,"Content-Type","application/x-www-form-urlencoded"));for(var p,h=0,g=o.length;h<g;h++)p=o[h],void 0!==n[p]&&(d[p]=n[p]);for(var p in s)d.setRequestHeader(p,s[p]);return d.send(c),d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){!function(e){function n(){}function r(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function i(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void f(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:s)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,r)}))}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void l(r(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&f(function(){e._handled||p(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var d=setTimeout,f="function"==typeof setImmediate&&setImmediate||function(e){d(e,0)},p=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(n);return i(this,new u(e,t,r)),r},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(i,e)},n)}t[i]=a,0===--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},o._setImmediateFn=function(e){f=e},o._setUnhandledRejectionFn=function(e){p=e},"undefined"!=typeof t&&t.exports?t.exports=o:e.Promise||(e.Promise=o)}(this)},{}],9:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,f,p,h,g=e[l].replace(s,"%20"),m=g.indexOf(n);m>=0?(d=g.substr(0,m),f=g.substr(m+1)):(d=g,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(a,p)?o(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],10:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(o(a))+n;return i(e[a])?r(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],11:[function(e,t,n){n=t.exports=e("./lib/siphash")},{"./lib/siphash":12}],12:[function(e,t,n){var r=function(){"use strict";function e(e,t){var n=e.l+t.l,r={h:e.h+t.h+(n/2>>>31)>>>0,l:n>>>0};e.h=r.h,e.l=r.l}function t(e,t){e.h^=t.h,e.h>>>=0,e.l^=t.l,e.l>>>=0}function n(e,t){var n={h:e.h<<t|e.l>>>32-t,l:e.l<<t|e.h>>>32-t};e.h=n.h,e.l=n.l}function r(e){var t=e.l;e.l=e.h,e.h=t}function o(o,i,a,s){e(o,i),e(a,s),n(i,13),n(s,16),t(i,o),t(s,a),r(o),e(a,i),e(o,s),n(i,17),n(s,21),t(i,a),t(s,o),r(a)}function i(e,t){return e.charCodeAt(t+3)<<24|e.charCodeAt(t+2)<<16|e.charCodeAt(t+1)<<8|e.charCodeAt(t)}function a(e,n){var r,a={h:e[1]>>>0,l:e[0]>>>0},s={h:e[3]>>>0,l:e[2]>>>0},c={h:a.h,l:a.l},u=a,l={h:s.h,l:s.l},d=s,f=0,p=n.length,h=p-7,g=new Uint8Array(new ArrayBuffer(8));for(t(c,{h:1936682341,l:1886610805}),t(l,{h:1685025377,l:1852075885}),t(u,{h:1819895653,l:1852142177}),t(d,{h:1952801890,l:2037671283});f<h;)r={h:i(n,f+4),l:i(n,f)},t(d,r),o(c,l,u,d),o(c,l,u,d),t(c,r),f+=8;g[7]=p;for(var m=0;f<p;)g[m++]=n.charCodeAt(f++);for(;m<7;)g[m++]=0;r={h:g[7]<<24|g[6]<<16|g[5]<<8|g[4],l:g[3]<<24|g[2]<<16|g[1]<<8|g[0]},t(d,r),o(c,l,u,d),o(c,l,u,d),t(c,r),t(u,{h:0,l:255}),o(c,l,u,d),o(c,l,u,d),o(c,l,u,d),o(c,l,u,d);var v=c;return t(v,l),t(v,u),t(v,d),v}function s(e){return[i(e,0),i(e,4),i(e,8),i(e,12)]}function c(e,t){var n=a(e,t);return("0000000"+n.h.toString(16)).substr(-8)+("0000000"+n.l.toString(16)).substr(-8)}function u(e,t){var n=a(e,t);return 4294967296*(2097151&n.h)+n.l}return{string16_to_key:s,hash:a,hash_hex:c,hash_uint:u}}(),t=t||{};t.exports=r},{}],13:[function(e,t,n){"use strict;";t.exports=Object.assign||function(){for(var e,t,n=Object.prototype.hasOwnProperty,r={},o=0,i=arguments.length;o<i;++o){t=arguments[o];for(e in t)n.call(t,e)&&(r[e]=t[e])}return r}},{}],14:[function(e,t,n){!function(e){e=e||"apr";var t=window.__APRSAK||function(e){t._cmds.push({k:String(e),a:Array.prototype.slice.call(arguments,1),t:Date.now()});for(var n=0,r=t._subs.length;n<r;n++)t._subs[n]()};t._cmds=t._cmds||[],t._subs=t._subs||[],window.__APRSAK=t,window.hasOwnProperty(e)===!1&&(window[e]=t)}()},{}],15:[function(e,t,n){"use strict";t.exports={}},{}],16:[function(e,t,n){"use strict";function r(t){var n=t.config.ads,r=t.ads,o=n.domains.some(function(n){if("string"==typeof n)return s(n);if("object"==typeof n){var r=Object.keys(n);return r.some(function(r){if(t.sakConfig.plugins.indexOf(r)===-1)return!1;var o=e("plugin:"+r);return o.checkAdsDomain(t,n[r])})}return!1});if(o===!1)throw new Error("Domain isn't not in whitelist");var i="/uid"===n.client.slice(-4)?n.client.slice(0,-4):n.client,a=n.packages.concat(["x"]);return r.hasOwnProperty("request")===!1&&(r.request=c(i,a).then(function(e){return l.set(n,e),r.hasOwnProperty("segments")===!1&&(r.segments=e),r.segments})),r.request}function o(e,t){var n=e.config.ads,o=e.ads,s=n.mapping,c=Object.keys(s);if(u.isActive()){for(var d=[],f=0;f<c.length;f++){var p=s[c[f]].map(String);d.push.apply(d,p)}var h=u.choose(d),g=i({},n,{fake:!0});return l.set(g,h),o.segments=h,a.resolve(o.segments)}return t.readCache&&l.isCached(n)?(o.segments=l.get(n),r(e),a.resolve(o.segments)):r(e)}var i=e("util-merge"),a=e("@apr/promise-polyfill"),s=e("../../lib/check/domain"),c=e("./request-ads"),u=e("./segments-fake"),l=e("./segments-cache");t.exports=function(e,t){t=i({},{readCache:!0,acceptFake:!0},t),e.ads=e.ads||{};var n=e.config.ads,r=e.ads,s=n&&n.domains&&n.mapping&&n.client;if(!s)throw new Error("Invalid ADS configuration");return r.hasOwnProperty("segments")?a.resolve(r.segments):o(e,t)}},{"../../lib/check/domain":29,"./request-ads":17,"./segments-cache":18,"./segments-fake":19,"@apr/promise-polyfill":5,"util-merge":13}],17:[function(e,t,n){"use strict";var r=e("querystring-es3/encode"),o=e("../../lib/consent"),i=e("../../lib/replace"),a=e("../../lib/ajax"),s=e("../../lib/log"),c=new o.DNTSelect("https://pdw-usr.userreport.com/api/v2/partner/{client}/uid?bust1","https://dnt-userreport.com/api/v2/partner/{client}/uid?bust1");t.exports=function(e,t){s.info("Requesting packages %s for %s",t.join(", "),e);var n=i(c,{client:e});return o.getForwardParams().then(function(e){return a({url:n+"&"+r(e),withCredentials:!0}).then(function(e){return e.data.ap&&e.data.ap.segments?e.data.ap.segments:[]})})}},{"../../lib/ajax":27,"../../lib/consent":31,"../../lib/log":36,"../../lib/replace":40,"querystring-es3/encode":10}],18:[function(e,t,n){"use strict";var r=e("./to-feature-segments-obj"),o=e("../../lib/map-obj"),i=e("../../lib/cache"),a=e("../../lib/log"),s=e("../../lib/CustomEvent"),c="apr_tdc",u=2592e6;n.isCached=function(e){var t=JSON.stringify(e),n=i.get(c,{source:t}),r=null!==n;return a.info("Segments cache %s",r?"hit":"miss"),r},n.get=function(e){var t=JSON.stringify(e),n=i.get(c,{source:t}),r=[];for(var o in n.d)n.d.hasOwnProperty(o)&&r.push.apply(r,n.d[o]);return a.info("Restored %d segments from cache",r.length),r},n.set=function(e,t){var n=JSON.stringify(e),l=r(e.mapping,t),d=0,f=o(l,function(e,t){return d+=t.length,["ap_"+e,t]});i.set(c,{ttl:u,source:n},{d:f}),window.dispatchEvent(new s("apr-tdc")),a.info("Stored %d segments into cache",d)}},{"../../lib/CustomEvent":24,"../../lib/cache":28,"../../lib/log":36,"../../lib/map-obj":37,"./to-feature-segments-obj":21}],19:[function(e,t,n){"use strict";var r=e("querystring-es3/decode"),o=e("array-shuffle"),i=e("../../lib/location"),a=e("../../lib/log"),s="__sak_fakeads";n.isActive=function(){var e=r(i().search);return e.hasOwnProperty(s)},n.chooseWithSettings=function(e,t){for(var n=o(e),r=[],i=0;i<t.length||0===n.length;i++){var s=t[i];if(0===s.indexOf("random")){var c=parseInt(s.slice("random".length))||1;r.push.apply(r,n.splice(0,c))}else{if(n.indexOf(s)===-1){a.error("Segment "+s+" unavailable");continue}r.push(s)}}return a.info("Fake ads choosed %d segments",r.length),r},n.choose=function(e){var t=r(i().search)[s].split(",");return n.chooseWithSettings(e,t)}},{"../../lib/location":35,"../../lib/log":36,"array-shuffle":6,"querystring-es3/decode":9}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n){n=!!n;for(var r=[],o=Object.keys(e),i=0;i<o.length;i++){var a=String(o[i]),s=e[a].map(String).filter(function(e){return t.indexOf(e)!==-1});(n||0!==s.length)&&r.push({feature:a,segments:s})}return r}},{}],21:[function(e,t,n){"use strict";t.exports=function(e,t,n){n=!!n;for(var r={},o=Object.keys(e),i=0;i<o.length;i++){var a=String(o[i]),s=e[a].map(String).filter(function(e){return t.indexOf(e)!==-1});(n||0!==s.length)&&(r[a]=s)}return r}},{}],22:[function(e,t,n){"use strict";var r=e("util-merge"),o=e("./lib/rnd"),i=e("./api"),a=JSON.parse('{"ads":{"client":"gamernetworksak","domains":[{"userreport-core":true},"*.gamer-network.net","*.dev.gamer-network.net","*.eurogamer.net","*.usgamer.net","*.rockpapershotgun.com","*.vg247.com"],"mapping":{"a":[11758,11755],"b":[13270,13269,13267,13325,13324,13294,13322,13293,13268],"c":[13048,13049,13051,13042,13043,13045,13047],"d":[11782,11781],"e":[12183,12182,12181,12178,12176,12175,12174,12173,12172,12171,12170,12169,12168,12189,12167,12185,12186,12184],"f":[12008,12007,12006,12005,12004,12003,12024,12002,12012,12013,12015,12016,12017,12018,12020,12021,12023,12010],"g":[11880,11882,11883,11884,11864,11863,11862,11865,11866,11867,11868,11869,11870,11872,11873,11874,11876,11879],"h":[13552,13551,13550],"j":[13633,13630,13629,13649,13634,13631,13628,13632],"l":[13454,13450,13451,13452,13453],"m":[10241,10247,10239],"x":[14253,15821],"z":[10288,10285,10284,10287,10286]},"packages":["a"]},"dfp-link":{"features":["KeyValues"],"networkId":43340684},"dfp-targeting-nomock":{"disableKeyValuesSending":true},"userreport-ak":{"trackingConfig":[{"trackingCode":"GNUm-0POQHliZEE2ZweR5x6mllQ","sectionId":null,"type":"Media","mediaId":"1e90f3d0-9958-4d10-99c1-e479c7a9a595"},{"trackingCode":"GNUm-2_0JH-BEwU2dIORoQ88jlA","sectionId":null,"type":"Media","mediaId":"1f09fddb-44e0-4dc1-9d20-e46843cf2394"},{"trackingCode":"GNUm-zVAxPZORQEyTxbvFSZs4zg","sectionId":null,"type":"Media","mediaId":"3d3150cd-9193-4c40-93c5-bbc5499b38ce"},{"trackingCode":"GNUm-6jW_YXp-BU2IYPc1onlZdQ","sectionId":null,"type":"Media","mediaId":"61bf35ea-7e7a-4d05-8860-f735a2795975"},{"trackingCode":"GNUm-gYMva6JyJ0yciDTqJHVHdA","sectionId":null,"type":"Media","mediaId":"6b2f8381-72a2-4c27-9c88-34ea24754774"},{"trackingCode":"GNUm-hNScbF3nVkKALjmilJWEjg","sectionId":null,"type":"Media","mediaId":"6c9cd484-e75d-4256-802e-39a29495848e"},{"trackingCode":"GNUm-tTM4gc39T06Nq4AkHxfnyg","sectionId":null,"type":"Media","mediaId":"813833b5-fdcd-4e4f-8dab-80241f17e7ca"},{"trackingCode":"GNUm-qHqIiBs-QEKXbS9lnBpQkQ","sectionId":null,"type":"Media","mediaId":"88887aa8-3e1b-4240-976d-2f659c1a5091"},{"trackingCode":"GNUm-cXMhiXVuLEC6oDrgp7PSYw","sectionId":null,"type":"Media","mediaId":"89217371-6e75-402c-baa0-3ae0a7b3d263"},{"trackingCode":"GNUm-3uhmsOuSWEiZ9Potj84Acg","sectionId":null,"type":"Media","mediaId":"b066e8de-92eb-4858-99f4-fa2d8fce0072"},{"trackingCode":"GNUm-ngrb9C6ALEWjh5yxbPDZCw","sectionId":null,"type":"Media","mediaId":"f4db0a9e-802e-452c-a387-9cb16cf0d90b"},{"trackingCode":"GNUm-7hpN912OYk2TxO7PCrU1cA","sectionId":null,"type":"Media","mediaId":"f74d1aee-8e5d-4d62-93c4-eecf0ab53570"}]},"userreport-core":{"networkLayout":[{"rules":[{"pattern":"*.nintendolife.com","operation":"DomainEquals"}],"id":"1e90f3d0-9958-4d10-99c1-e479c7a9a595","color":"#292929","sections":[]},{"rules":[{"pattern":"*.pushsquare.com","operation":"DomainEquals"}],"id":"1f09fddb-44e0-4dc1-9d20-e46843cf2394","color":"#0A51AD","sections":[]},{"rules":[{"pattern":"*.indiedb.com","operation":"DomainEquals"}],"id":"3d3150cd-9193-4c40-93c5-bbc5499b38ce","color":"#60AF12","sections":[]},{"rules":[{"pattern":"*.test.com","operation":"DomainEquals"}],"id":"61bf35ea-7e7a-4d05-8860-f735a2795975","color":null,"sections":[]},{"rules":[{"pattern":"*.eurogamer.net","operation":"DomainEquals"}],"id":"6b2f8381-72a2-4c27-9c88-34ea24754774","color":"#0084CC","sections":[]},{"rules":[{"pattern":"*.metabomb.net","operation":"DomainEquals"}],"id":"6c9cd484-e75d-4256-802e-39a29495848e","color":"#40293F","sections":[]},{"rules":[{"pattern":"*.roadtovr.com","operation":"DomainEquals"}],"id":"813833b5-fdcd-4e4f-8dab-80241f17e7ca","color":"#1B4995","sections":[]},{"rules":[{"pattern":"*.gamesindustry.biz","operation":"DomainEquals"}],"id":"88887aa8-3e1b-4240-976d-2f659c1a5091","color":"#373E39","sections":[]},{"rules":[{"pattern":"*.moddb.com","operation":"DomainEquals"}],"id":"89217371-6e75-402c-baa0-3ae0a7b3d263","color":"#000000","sections":[]},{"rules":[{"pattern":"*.usgamer.net","operation":"DomainEquals"}],"id":"b066e8de-92eb-4858-99f4-fa2d8fce0072","color":"#112779","sections":[]},{"rules":[{"pattern":"*.rockpapershotgun.com","operation":"DomainEquals"}],"id":"f4db0a9e-802e-452c-a387-9cb16cf0d90b","color":"#009B7C","sections":[]},{"rules":[{"pattern":"*.eurogamer.de","operation":"DomainEquals"}],"id":"f74d1aee-8e5d-4d62-93c4-eecf0ab53570","color":"#0084CC","sections":[]}],"companyId":"c3701762-7132-47ed-96fa-a6856c1fa499"}}'),s=JSON.parse('["dfp-targeting-nomock","userreport-ak","userreport-core"]'),c=!!parseInt("0")||window.location.href.indexOf("__sak=debug")!==-1||"undefined"!=typeof window&&"true"===window.localStorage.getItem("__sak_debug"),u=window.location.href.indexOf("__sak=disable")!==-1||window.location.href.indexOf("__sak=disable")!==-1,l={customerId:"gamer-network",customerConfig:a,debug:c,dnt:!1,consents:{tcStringV2:"",tcStringV1:"",storage:!0},disabled:u,plugins:s,revision:"732713e",publishDate:"2021-02-10T10:08:18.970Z",sessionId:o()};i.setAnonymousTracking=function(e){l.dnt=e},i.setConsents=function(e){l.consents=r(l.consents,e)},t.exports=l},{"./api":15,"./lib/rnd":41,"util-merge":13}],23:[function(e,t,n){"use strict";function r(e){var t=e[0];return!("function"!=typeof l[t]||!(l[t].executeBeforePlugins||f.indexOf(t)>-1))}function o(e){if("object"==typeof e)for(var t=0,n=e.length;t<n;t++)window.audienceProjectLayer.push(e[t])}function i(){for(var e=window.location.href.split(/[?&]/),t="__audienceProjectLayer=",n=0,r=e.length;n<r;n++)if(0===e[n].indexOf(t)){var i=e[n].slice(t.length);try{i=JSON.parse(decodeURIComponent(i))}catch(e){return void u.warn("Unable to parse audienceProjectLayer queue from location")}o(i)}}function a(){window.audienceProjectLayer.filter(r).forEach(h),window._urq.filter(r).forEach(h)}function s(){if(window.audienceProjectLayer.push===Array.prototype.push){var e=window.audienceProjectLayer.push;window.audienceProjectLayer.push=function(t){e.apply(window.audienceProjectLayer,arguments),h(t)},window.audienceProjectLayer.filter(function(e){return!r(e)}).forEach(h);var t=window._urq.push;window._urq.push=function(e){t.apply(window._urq,arguments),h(e)},window._urq.filter(function(e){return!r(e)}).forEach(h)}}var c=e("@apr/promise-polyfill"),u=e("./lib/log"),l=e("./api"),d=e("./config");window.audienceProjectLayer=window.audienceProjectLayer||[],window._urq=window._urq||[];var f=["setAnonymousTracking","setConsents"],p=["tryToInvite","inhibitInvitation","initSite","integrateWithGTM","suppressCookieSync","setPrivacyPolicyChecked","setCustomTranslation","setGDPR","setGDPRConsent","forwardAnonymousTracking","forwardConsents"],h=function(e){var t=e[0],n=Array.prototype.slice.call(e,1);"function"==typeof t?t.apply(null,n):"function"==typeof l[t]?l[t].apply(null,n):p.indexOf(t)!==-1||u.error("Unable to find command %s",t)};window.addEventListener("message",function(e){if(e.data&&e.data.indexOf&&0===e.data.indexOf("audienceProjectLayer$$$")){var t=e.data.split("$$$",3),n=t[1],r=t[2];r&&(r=JSON.parse(r)),window.audienceProjectLayer.push([n,r])}},!1),t.exports=function(e,t,n,r){u.info("Customer config:",t),u.info("SAK config:",n),t.iabcmp&&t.iabcmp.tcStringV2?d.consents.tcStringV2=t.iabcmp.tcStringV2:t.iabcmp&&t.iabcmp.tcStringV1&&(d.consents.tcStringV1=t.iabcmp.tcStringV1);var o={config:t,sakConfig:n,isSpider:r};n.sakObject.starting.fire(o),r&&(e=e.filter(function(e){return e.executeForSpiders})),i(),u.info("API queue:",window.audienceProjectLayer,window._urq),a();var l=e.map(function(e){return new c(function(t){t(e(o))})}),f=c.all(l);return n.sakObject.started.fire(o),s(),f}},{"./api":15,"./config":22,"./lib/log":36,"@apr/promise-polyfill":5}],24:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),n}"undefined"!=typeof window&&(r.prototype=window.Event.prototype);try{new window.CustomEvent("test"),t.exports=window.CustomEvent}catch(e){t.exports=r}},{}],25:[function(e,t,n){"use strict";function r(){this._firedEvents=[],this._callbacks=[]}r.prototype.subscribe=function(e,t){if(t)for(var n=0;n<this._firedEvents.length;n++)e.apply(null,this._firedEvents[n]);return this._callbacks.push(e),function(){return this.unsubscribe(e)}.bind(this)},r.prototype.unsubscribe=function(e){var t=this._callbacks.indexOf(e);t!==-1&&this._callbacks.splice(t,1)},r.prototype.fire=function(){var e=Array.prototype.slice.call(arguments,0);this._firedEvents.push(e);for(var t=[],n=this._callbacks.slice(0),r=0,o=n.length;r<o;r++)try{n[r].apply(null,e)}catch(e){t.push(e)}if(0!==t.length){var i=t.map(function(e){return String(e.stack)||String(e)}).join("\n\n");throw new Error("Errors while calling subscribers\n"+i)}},t.exports=r},{}],26:[function(e,t,n){"use strict";t.exports=function(e,t){t=t||{},"async"in t==!1&&(t.async=!0);var n=document.createElement("script");if(n.type="text/javascript",n.src=e,t.id){if(document.getElementById(t.id))return;n.id=t.id}n.async=t.async;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}},{}],27:[function(e,t,n){"use strict";var r=e("nanoajax"),o=e("@apr/promise-polyfill"),i=e("../lib/merge"),a={method:"GET",headers:{},cors:!0,withCredentials:!1,responseType:"text",jsonResponse:!0,jsonRequest:!0,expectOk:!0};t.exports=function(e){e=i(a,e),e.jsonRequest&&(e.hasOwnProperty("payload")&&(e=i({body:JSON.stringify(e.payload)},e)),e.hasOwnProperty("body")&&(e=i(e,{headers:i({"Content-Type":"application/json"},e.headers)})));var t=" when "+e.method+" "+e.url,n=new o(function(n,o){r.ajax(e,function(e,r){if(0===e){var i=new Error(r+t);o(i)}else{var a={code:e,body:r};n(a)}})});return n.then(function(n){if(e.expectOk&&(n.code<200||n.code>=300))throw new Error("Bad response code "+n.code+t);if(e.jsonResponse){var r=JSON.parse(n.body);n=i(n,{data:r})}return n})}},{"../lib/merge":38,"@apr/promise-polyfill":5,nanoajax:7}],28:[function(e,t,n){"use strict";var r=e("./merge"),o=e("./hash"),i={ttl:null,source:null};n.set=function(e,t,n){t=r(i,t);var a=Date.now(),s={at:a};t.ttl&&(s.exp=a+t.ttl),t.source&&(s.src=o(t.source)),s=r({},s,n);var c=JSON.stringify(s);try{window.localStorage.setItem(e,c)}catch(e){}},n.get=function(e,t){t=r(i,t||{});try{var a=window.localStorage.getItem(e);if(a){var s=JSON.parse(a),c=!s.exp||Date.now()<s.exp,u=null===t.source||o(t.source)===s.src;if(c&&u)return s}}catch(e){}return n.remove(e),null},n.remove=function(e){try{window.localStorage.removeItem(e)}catch(e){}}},{"./hash":33,"./merge":38}],29:[function(e,t,n){"use strict";var r=e("../../lib/location");t.exports=function(e,t){t||(t=r().hostname);for(var n=t.split(".").reverse(),o=e.split(".").reverse(),i=0;;i++){if(i>=n.length)return o.length===n.length||o.length-n.length===1&&"*"===o[o.length-1];if(i>=o.length){if("*"===o[o.length-1])continue;return!1}if("*"!==o[i]&&o[i].toLowerCase()!==n[i].toLowerCase())return!1}}},{"../../lib/location":35}],30:[function(e,t,n){"use strict";var r=e("../../lib/location");t.exports=function(e,t){if(t||(t=r().pathname),"/"===e)return"/"===t;e="/"+e.replace(/(^\/|\/$)/g,"");var n=t.slice(e.length*-1)===e,o=t.indexOf(e+"/")!==-1;return n||o}},{"../../lib/location":35}],31:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),o=e("../config");n.IDENTIFY=1,n.TARGET_ADS=3,n.TARGET_CONTENT=4,n.MEASURE=5,n.V2_USE_DEVICE=1,n.V2_CREATE_ADS_PROFILE=3,n.V2_SELECT_PERSONALIZED_CONTENT=6,n.V2_MEASURE_PERFORMANCE_CONTENT=8;var i={acquire:function(){return r.resolve(!0)},getForwardParams:function(){return r.resolve({})},getConsentData:function(){return r.resolve({})},hasTTL:function(){return!1}},a=i;n.enable=function(e){a=e},n.disable=function(){a=i},n.acquire=function(e){return a.acquire(e)},n.getForwardParams=function(){return a.getForwardParams()},n.getConsentData=function(){return a.getConsentData()},n.hasTTL=function(){return a.hasTTL()};var s=function(e,t){this.toString=this.valueOf=function(){return o.dnt?t:e}};s.prototype=String.prototype,n.DNTSelect=s},{"../config":22,"@apr/promise-polyfill":5}],32:[function(e,t,n){"use strict";var r=e("./map-obj"),o=e("./replace"),i=e("./log");t.exports=function(e,t,n,a){t=t||{},n=n||{},(a||"undefined"==typeof a)&&(n=r(n,function(e,t){return[e,encodeURIComponent(t)]})),e=o(e,n);var s=[];for(var c in t)t.hasOwnProperty(c)&&t[c]&&s.push(encodeURIComponent(c)+"="+encodeURIComponent(t[c]));0!==s.length&&(e+=e.indexOf("?")===-1?"?":"&",e+=s.join("&")),i.info("Firing pixel %s",e),(new window.Image).src=e}},{"./log":36,"./map-obj":37,"./replace":40}],33:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2,siphash:11}],34:[function(e,t,n){"use strict";var r=[/bot/i,/spider/i,/facebookexternalhit/i,/simplepie/i,/yahooseeker/i,/embedly/i,/quora link preview/i,/outbrain/i,/vkshare/i,/monit/i,/Pingability/i,/Monitoring/i,/WinHttpRequest/i,/Apache-HttpClient/i,/getprismatic.com/i,/python-requests/i,/Twurly/i,/yandex/i,/browserproxy/i,/crawler/i,/Qwantify/i,/Yahoo! Slurp/i,/pinterest/i,/Tumblr\/14.0.835.186/i,/Tumblr Agent 14.0/i];t.exports=function(e){return r.some(function(t){return t.test(e)})}},{}],35:[function(e,t,n){"use strict";function r(){var e=i||window.location.toString();if(e=e.replace(/\.demo\.audienceproject\.com\//,"/"),a.url===e)return a.parsed;var t=o(e);return a.url=e,a.parsed=t,t}var o=e("./parseUrl"),i=null,a={};t.exports=r,t.exports.onLocationChange=function(e){var t=r().pathname,n=setInterval(function(){var n=r().pathname;n!==t&&(t=n,e(n))},100);return function(){clearInterval(n)}},t.exports.updateLocation=function(e){o(e),i=e},t.exports.parse=o},{"./parseUrl":39}],36:[function(e,t,n){"use strict";var r=e("./Event"),o=new r;t.exports.subscribe=o.subscribe.bind(o),t.exports.unsubscribe=o.unsubscribe.bind(o),t.exports.log=o.fire.bind(o,"log"),t.exports.info=o.fire.bind(o,"info"),t.exports.warn=o.fire.bind(o,"warn"),t.exports.error=o.fire.bind(o,"error")},{"./Event":25}],37:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n={},r=Object.keys(e),o=0;o<r.length;o++){var i=t(r[o],e[r[o]]);n[i[0]]=i[1]}return n}},{}],38:[function(e,t,n){"use strict";t.exports=function(){for(var e,t,n=Object.prototype.hasOwnProperty,r={},o=0,i=arguments.length;o<i;++o){t=arguments[o];for(e in t)n.call(t,e)&&(r[e]=t[e])}return r}},{}],39:[function(e,t,n){"use strict";function r(e){var t=0!==e.indexOf("/")&&e.indexOf("/")!==-1&&(e.indexOf(":")===-1||e.indexOf(":")>e.indexOf("/")),n=o.exec(t?"noscheme://"+e:e),r={scheme:t?"":n[2]||"",host:n[4]||"",hostname:n[4]?n[4].split(":")[0]:"",pathname:n[5]||"",search:n[7]||"",hash:n[9]||"",toString:function(){return e}};return r.origin=r.scheme+"://"+r.host,r}var o=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");t.exports=r},{}],40:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.split("{"+n+"}").join(String(t[n])));return e}},{}],41:[function(e,t,n){"use strict";t.exports=function(e){e=e||10;for(var t="";t.length<e;)t+=Math.random().toString(36).slice(2,3);return t}},{}],42:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),o=e("./ajax"),i=e("./cache"),a=e("./log"),s="apr_whoami",c=2592e6,u="https://tag.userreport.com/whoami";t.exports=function(){var e=String(window.navigator),t=i.get(s,{source:e});return null!==t?(a.info("Whoami cache hit"),r.resolve(t.d)):o({url:u}).then(function(t){return i.set(s,{ttl:c,source:e},{d:t.data}),a.info("Whoami",t.data),t.data})}},{"./ajax":27,"./cache":28,"./log":36,"@apr/promise-polyfill":5}],43:[function(e,t,n){"use strict";t.exports=function(){var e=Array.prototype,t=Object.keys&&Date.now&&e.forEach&&e.map&&e.filter&&e.indexOf&&e.some;return!!t}},{}],44:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),o=e("util-merge"),i=e("../"),a=e("../lib/log"),s=e("../lib/Event"),c=e("./log-to-console"),u=e("./check-browser"),l=e("../config"),d=e("../lib/isSpider.js");r._setUnhandledRejectionFn&&r._setUnhandledRejectionFn(a.error);try{if(l.debug&&c(),l.sakObject=window.__sak=o({},{customers:[],loaded:new s,starting:new s,started:new s},window.__sak||{}),a.info("Revision: %s; Publish date: %s; Customer: %s",l.revision,l.publishDate&&new Date(l.publishDate).toGMTString(),l.customerId),l.disabled)return void a.info("Disabled");if(u()===!1)return void a.info("Browser not supported");var f=d(window.navigator.userAgent);f&&a.warn("User agent is a bot-like, will be executed only plugins that declare that they can be called for bot-environments using `executeForSpiders = true`");var p=!!l.customerId&&l.sakObject.customers.indexOf(l.customerId)!==-1;if(l.sakObject.loaded.fire(l),p===!1){l.customerId&&l.sakObject.customers.push(l.customerId);
var h=l.plugins.map(function(t){return e("plugin:"+t)});i(h,l.customerConfig,l,f).catch(a.error)}}catch(e){a.error(e)}},{"../":23,"../config":22,"../lib/Event":25,"../lib/isSpider.js":34,"../lib/log":36,"./check-browser":43,"./log-to-console":45,"@apr/promise-polyfill":5,"util-merge":13}],45:[function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);"string"==typeof t[0]?t[0]="SAK :: "+t[0]:t.unshift("SAK:");try{console[e].apply(console,t)}catch(n){switch(t.length){case 1:console.log(e,t[0]);break;case 2:console.log(e,t[0],t[1]);break;case 3:console.log(e,t[0],t[1],t[2]);break;default:console.log(e,t)}}}var o=e("../lib/log");t.exports=function(){return o.subscribe(r)}},{"../lib/log":36}],46:[function(e,t,n){"use strict";function r(){var t=window.hasOwnProperty("apr")===!1;return e("../snippets/main"),t&&delete window.apr,window.__APRSAK}function o(e){if("function"==typeof e)return e;if("string"==typeof e)return function(t){return t.k===e};throw new Error("Wrong predicate")}function i(e){e=o(e);var t=r();if(t)for(var n=0,i=t._cmds.length;n<i;n++){var a=t._cmds[n];if(e(a))return t._cmds.splice(n,1),a}}function a(e){for(var t,n=[];void 0!==(t=i(e));)n.push(t);return n}function s(e,t){a(e).forEach(t);var n=r();n._subs.push(function(){a(e).forEach(t)})}t.exports.takeSingle=i,t.exports.takeAll=a,t.exports.take=s},{"../snippets/main":14}],"plugin:dfp-targeting-nomock":[function(e,t,n){"use strict";function r(e){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){e.forEach(function(e){a.info("Targeting",e.feature,e.segments),window.googletag.pubads().setTargeting("ap_"+e.feature,e.segments)})})}var o=e("../api/ads"),i=e("../api/ads/to-feature-segments-arr"),a=e("../lib/log"),s=e("../public-api");t.exports=function(e){return o(e).then(function(t){if(!e.config["dfp-targeting-nomock"].disableKeyValuesSending){var n=i(e.config.ads.mapping,t);r(n)}}).finally(function(){s.take("dfp-targeting-done",function(e){try{e.a[0]()}catch(e){a.error("Error calling 'dfp-targeting-done' callback",e)}})})}},{"../api/ads":16,"../api/ads/to-feature-segments-arr":20,"../lib/log":36,"../public-api":46}],"plugin:userreport-ak":[function(e,t,n){"use strict";function r(){return c.getForwardParams().then(function(e){c.acquire({1:[c.IDENTIFY],2:[c.V2_USE_DEVICE]}).then(function(t){var n=t&&h.consents.storage&&!h.dnt?f.readOrCreateDsu(c.hasTTL()):"";l(g,i({t:o,d:m,rnd:d(),dsu:n,med:u().toString()},e,w)),b.forEach(function(t){l(g,i({t:t,d:m,rnd:d(),dsu:n,med:u().toString()},e,w))})})})}var o,i=e("util-merge"),a=e("./userreport-core"),s=e("../lib/log"),c=e("../lib/consent"),u=e("../lib/location"),l=e("../lib/fire-pixel"),d=e("../lib/rnd"),f=e("@apr/dsu"),p=e("../api"),h=e("../config"),g=new c.DNTSelect("https://visitanalytics.userreport.com/hit","https://visitanalytics.dnt-userreport.com/hit"),m="",v={},w={},b=[];t.exports=function(e){var t=a.resolveCurrent(e),n=e.config["userreport-ak"].trackingConfig;if(e.isSpider&&(w={event:"bot"}),!t.mediaId)return function(){};e.config["userreport-ak"].trackingConfig.forEach(function(e){"Section"===e.type&&e.mediaId===t.mediaId&&(v[e.sectionId]=e.trackingCode)});var i=n.filter(function(e){return"Media"===e.type&&e.mediaId===t.mediaId}).map(function(e){return e.trackingCode});return b=n.filter(function(e){return"Section"===e.type&&e.mediaId===t.mediaId&&t.sectionIds.indexOf(e.sectionId)!==-1}).map(function(e){return e.trackingCode}),0===i.length?(s.info("No media tracking matching"),null):i.length>1?(s.error("More than one media TP matching",i),null):(o=i[0],r().then(function(){return u.onLocationChange(function(){r()})}))},t.exports.executeForSpiders=!0,p.trackSectionPageView=function(e){if(!e)return void s.warn("Section ID is not passed");var t=v[e];return t?void c.getForwardParams().then(function(e){var n=h.consents.storage&&!h.dnt?f.readOrCreateDsu(c.hasTTL()):"";l(g,i({t:t,d:m,rnd:d(),dsu:n,med:u().toString()},e,w))}):void s.warn("Section ID "+e+" does not belong to current media")},p.setMAID=function(e){m=e},p.trackPageview=function(e){var t=e||u().toString();c.getForwardParams().then(function(e){l(g,i({t:o,d:m,rnd:d(),med:t},e,w))})}},{"../api":15,"../config":22,"../lib/consent":31,"../lib/fire-pixel":32,"../lib/location":35,"../lib/log":36,"../lib/rnd":41,"./userreport-core":"plugin:userreport-core","@apr/dsu":1,"util-merge":13}],"plugin:userreport-core":[function(e,t,n){"use strict";function r(e,t){return I().then(function(n){var r;r=n.tablet?"Tablet":n.mobile?"Mobile":n.desktop?"Desktop":n.smarttv?"SmartTV":"Unknown";var o={timestamp:"$TIMESTAMP_SECONDS",uid:"$DEVICEID",devicetype:r,country:n.country,body:t};return E({method:"POST",url:e,payload:o,jsonResponse:!1,withCredentials:!0})})}function o(e){var t=b();return new RegExp(e).test(t.hostname+t.pathname)}function i(e,t){for(var n=window._urq||[],r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t)return!0;for(var o=window.audienceProjectLayer||[],i=0;i<o.length;i++)if(o[i][0]===e&&o[i][1]===t)return!0;return!1}function a(e){return!!i("setMediaId",e.id)&&(w.log("Media matched by _urq:",e.id),!0)}function s(e){return!!i("setSectionId",e.id)&&(w.log("Section matched by _urq:",e.id),!0)}function c(e,t){for(var n=window.document.getElementsByTagName("meta"),r=0;r<n.length;r++){var o=n[r].getAttribute("name"),i=n[r].getAttribute("value");if(o===e&&i===String(t))return!0}return!1}function u(e){return!!c("userreport:mediaId",e.id)&&(w.log("Media matched by meta:",e.id),!0)}function l(e){return!!c("userreport:sectionId",e.id)&&(w.log("Section matched by meta:",e.id),!0)}function d(e,t){if(!e.rules)return!1;for(var n=0;n<e.rules.length;n++){var r=e.rules[n],o=t[r.operation];if(o||w.error("Not supported rule",e.id,r.operation),o(r.pattern))return!0}return!1}function f(e){return!!d(e,D)&&(w.log("Media matched by rule:",e.id),!0)}function p(e){return!!d(e,q)&&(w.log("Section matched by rule:",e.id),!0)}function h(e){var t={companyId:null,mediaId:null,sectionIds:null},n=e.config["userreport-core"],r=n.networkLayout,o=r.filter(a);if(o.length||(o=r.filter(u)),o.length||(o=r.filter(f)),0===o.length)return w.error("Can’t resolve media"),t;if(o.length>1)return w.error("Resolved more than one media",o),t;var i=o[0],c=(i.sections||[]).filter(function(e){return s(e)||l(e)||p(e)});return t.companyId=n.companyId,t.mediaId=i.id,t.sectionIds=c.map(function(e){return e.id}),A=t.mediaId,w.info("Resolved media:",t.mediaId),w.info("Resolved sections:",t.sectionIds),t}function g(e){var t=e&&e.lastUpdated;if(!t)return!1;t.getTime&&(t=t.getTime());var n=6e4;return(new Date).getTime()-t<n}function m(e){var t=function(t){var n=t.data;if(n===R){var r={config:{mediaId:e.mediaId}};t.source.postMessage(JSON.stringify(r),t.origin)}};window.addEventListener("message",t,!1)}var v=e("../lib/consent"),w=e("../lib/log"),b=e("../lib/location"),y=e("../api"),x=e("../lib/add-script-tag"),I=e("../lib/whoami"),E=e("../lib/ajax"),_=e("../lib/check/domain"),S=e("../lib/check/section"),k=e("util-merge"),O=e("../config"),C="https://cdn.userreport.com/userreport.js",j="https://relay.userreport.com/f/pageview",T="https://relay.userreport.com/f/missing",A=null,D={DomainEquals:_,StartsWith:function(e){var t=b(),n=t.hostname+t.pathname;return e.indexOf("?")!==-1&&(n+="?"+t.search),e.indexOf("#")!==-1&&(n+="#"+t.hash),0===n.indexOf(e)},Contains:function(e){return b().toString().indexOf(e)!==-1},RegEx:o},q={Section:S,Contains:function(e){return b().toString().indexOf(e)!==-1},StartsWith:function(e){var t=b(),n=t.pathname;return e.indexOf("?")!==-1&&(n+="?"+t.search),e.indexOf("#")!==-1&&(n+="#"+t.hash),0===n.indexOf(e)},UrlEquals:function(e){var t=b(),n=b.parse(e);if(n.host&&n.host!==n.hostname&&t.host!==n.host)return!1;if(n.hostname&&t.hostname!==n.hostname)return!1;if(n.pathname){var r="/"===n.pathname.slice(-1)[0]?n.pathname.slice(0,-1):n.pathname,o="/"===t.pathname.slice(-1)[0]?t.pathname.slice(0,-1):t.pathname;if(r!==o)return!1}return(!n.search||t.search===n.search)&&(!n.hash||t.hash===n.hash)},RegExp:o,RegEx:o,PathEquals:function(e){return b().pathname===e}},R="getSiteConfig";t.exports=function(e){return v.acquire({1:[v.IDENTIFY],2:[v.V2_USE_DEVICE,v.V2_MEASURE_PERFORMANCE_CONTENT]}).then(function(t){if(t===!1)return null;if(window.location.href.indexOf("__urp=suppress")!==-1)try{w.info("Invitation suppressed forever"),window.localStorage.setItem("_usrp_lq","20300101")}catch(e){}window._urq=window._urq||[],v.getForwardParams().then(function(e){(e.gdpr||e.gdpr_consent)&&(window._urq.push(["setGDPR",e.gdpr?"1":"0"]),window._urq.push(["setGDPRConsent",e.gdpr_consent]))}),O.dnt&&window._urq.push(["forwardAnonymousTracking",O.dnt]),O.consents.storage||window._urq.push(["forwardConsents",O.consents]);var n=h(e);if(m(n),n.mediaId){v.getConsentData().then(function(e){g(e.core)&&(window._urq.push(["inhibitInvitation",!0]),setTimeout(function(){window._urq.push(["tryToInvite"])},6e4))}),window._urq.push(["initSite",n.mediaId]),w.info("Initalizing UserReport for media:",n.mediaId);var o=e.config["userreport-invitation-utils"]&&e.config["userreport-invitation-utils"].optimizeScriptLoading===!0;o||x(C,{id:"userreport-script"})}else{var i=/__(bpn|urp)=test_invite/i.test(window.location.href);i&&alert("Unable to identify media, domain is not configured or dublicated Media created. ")}var a=e.config["userreport-invitation-utils"]&&e.config["userreport-invitation-utils"].disableImplementationTracking===!0;return Math.random()<.1&&!a?v.acquire({1:[v.IDENTIFY,v.MEASURE],2:[v.V2_USE_DEVICE,v.V2_MEASURE_PERFORMANCE_CONTENT]}).then(function(e){return e===!1?null:n.mediaId?r(j+"/json",{companyId:n.companyId,mediaId:n.mediaId,sectionIds:n.sectionIds}):r(T+"/json",{companyId:n.companyId,domain:b().hostname})}):null})},t.exports.resolveCurrent=h,t.exports.checkAdsDomain=function(e){var t=h(e);return!!t&&null!==t.mediaId},y.embedSurvey=function(e,t){if("string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e)throw new Error("Unable to find passed container");var n={ignoreLocalQuarantine:!1,mediaId:A,surveyUrl:"https://sak.userreport.com/_rt/vs/survey",onDoneCallback:function(){},customizations:{invitation:{headline:null,accept:null,decline:null},thankYou:{headline:null,close:null,powered:null},disabledQuestions:[]}};if(t=k({},n,t),!t.mediaId)throw new Error("Media is not defined. You need to pass mediaId in options or setup media matching rules");var r={};t.customizations.invitation&&(r.invitation={},t.customizations.invitation.headline&&(r.invitation.headline=t.customizations.invitation.headline),t.customizations.invitation.accept&&(r.invitation.accept=t.customizations.invitation.accept),t.customizations.invitation.decline&&(r.invitation.decline=t.customizations.invitation.decline)),t.customizations.thankYou&&(r.thankYou={},t.customizations.thankYou.headline&&(r.thankYou.headline=t.customizations.thankYou.headline),t.customizations.thankYou.close&&(r.thankYou.close=t.customizations.thankYou.close),t.customizations.thankYou.built&&(r.thankYou.built=t.customizations.thankYou.built)),t.customizations.disabledQuestions&&t.customizations.disabledQuestions.length>0&&(r.questionOverrides={},t.customizations.disabledQuestions.forEach(function(e){r.questionOverrides["q"+e]=null,23===e&&(r.questionOverrides.q100103=null,r.questionOverrides.q100104=null)}));var o=document.createElement("iframe");for(o.style.width="100%",o.style.height="100%",o.src=t.surveyUrl+"?mid="+t.mediaId+"#localization="+encodeURIComponent(JSON.stringify(r)),o.frameborder="no",o.style.border="none 0";e.firstChild;)e.removeChild(e.lastChild);e.appendChild(o),window.addEventListener("message",function(e){"userreport.surveyEnded"===e.data.name&&t.onDoneCallback&&t.onDoneCallback()})},y.setMediaId=function(){return null},y.setSectionId=function(){return null}},{"../api":15,"../config":22,"../lib/add-script-tag":26,"../lib/ajax":27,"../lib/check/domain":29,"../lib/check/section":30,"../lib/consent":31,"../lib/location":35,"../lib/log":36,"../lib/whoami":42,"util-merge":13}]},{},[44])}();